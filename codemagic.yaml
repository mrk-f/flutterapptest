# Automatically generated on 2021-03-02 UTC from https://codemagic.io/app/60228dbebe2f064451fe4a6b/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  ios:
    name: iOS
    max_build_duration: 60
    environment:
      vars:
        FIREBASE_TOKEN: 1//0cQj_4GQcN1O9CgYIARAAGAwSNwF-L9IrWhBxfO-TrSWG3dwdONpBy2Lx01PlrmXN2KPDBI06fbf0Hm7RKsN9yuImUlcKPwkQiOA
        IOS_FIREBASE_SECRET: 'PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHBsaXN0IFBVQkxJQyAiLS8vQXBwbGUvL0RURCBQTElTVCAxLjAvL0VOIiAiaHR0cDovL3d3dy5hcHBsZS5jb20vRFREcy9Qcm9wZXJ0eUxpc3QtMS4wLmR0ZCI+CjxwbGlzdCB2ZXJzaW9uPSIxLjAiPgo8ZGljdD4KCTxrZXk+Q0xJRU5UX0lEPC9rZXk+Cgk8c3RyaW5nPjY1NzcxMDU5NzY0LWFobXBsbzkyazg1dTdhbnYycjlmbm9mcWFwYThibWFyLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tPC9zdHJpbmc+Cgk8a2V5PlJFVkVSU0VEX0NMSUVOVF9JRDwva2V5PgoJPHN0cmluZz5jb20uZ29vZ2xldXNlcmNvbnRlbnQuYXBwcy42NTc3MTA1OTc2NC1haG1wbG85Mms4NXU3YW52MnI5Zm5vZnFhcGE4Ym1hcjwvc3RyaW5nPgoJPGtleT5BUElfS0VZPC9rZXk+Cgk8c3RyaW5nPkFJemFTeUJOcVJlekd5YzVRZ2UxZmtlQXI1UENNa003Qkh2Q0syYzwvc3RyaW5nPgoJPGtleT5HQ01fU0VOREVSX0lEPC9rZXk+Cgk8c3RyaW5nPjY1NzcxMDU5NzY0PC9zdHJpbmc+Cgk8a2V5PlBMSVNUX1ZFUlNJT048L2tleT4KCTxzdHJpbmc+MTwvc3RyaW5nPgoJPGtleT5CVU5ETEVfSUQ8L2tleT4KCTxzdHJpbmc+Y29tLm1hcmsuZmx1dHRlcmFwcHRlc3Q8L3N0cmluZz4KCTxrZXk+UFJPSkVDVF9JRDwva2V5PgoJPHN0cmluZz5mbHV0dGVydGVzdC1iZjAyMDwvc3RyaW5nPgoJPGtleT5TVE9SQUdFX0JVQ0tFVDwva2V5PgoJPHN0cmluZz5mbHV0dGVydGVzdC1iZjAyMC5hcHBzcG90LmNvbTwvc3RyaW5nPgoJPGtleT5JU19BRFNfRU5BQkxFRDwva2V5PgoJPGZhbHNlPjwvZmFsc2U+Cgk8a2V5PklTX0FOQUxZVElDU19FTkFCTEVEPC9rZXk+Cgk8ZmFsc2U+PC9mYWxzZT4KCTxrZXk+SVNfQVBQSU5WSVRFX0VOQUJMRUQ8L2tleT4KCTx0cnVlPjwvdHJ1ZT4KCTxrZXk+SVNfR0NNX0VOQUJMRUQ8L2tleT4KCTx0cnVlPjwvdHJ1ZT4KCTxrZXk+SVNfU0lHTklOX0VOQUJMRUQ8L2tleT4KCTx0cnVlPjwvdHJ1ZT4KCTxrZXk+R09PR0xFX0FQUF9JRDwva2V5PgoJPHN0cmluZz4xOjY1NzcxMDU5NzY0OmlvczpiNmY1MjNiMGQ1YzI4MjlkZDRlODYxPC9zdHJpbmc+CjwvZGljdD4KPC9wbGlzdD4=

          '
        APP_STORE_CONNECT_ISSUER_ID: 7d812fe2-8abd-47ca-9d27-3ed7e62d7b6d
        APP_STORE_CONNECT_KEY_IDENTIFIER: 79WKM8X7V7
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmdQanZlTmFJLV9xYWU2MWNwTGFfcGVyNkRtOEx5YXVwQ1FES1l0UEpxblFqS1VXMXI2LUxmSl82aXZJVjBRZEkxNVNFZl9LSHN2UEtYVjY3SnZWYnJtQUlnRVhXVHZaT0RrX3JaWlBrQXlXUGtURTc1UWtGcUxiZ2NKUWNTV1hsVXp3X2JxMkVma0N2S1R4aXE1d3dyT3ltbzRBT2wtbDg5XzZxSW4xNmhJcEhzdktLRHROdWUyaDNkTjdhd21FdzlNNWNsODRuUGpBMkxFaGE0UEg1X19iNGFvQjN3c2tPSzZDcGE3OFlUOEpnMlB5d2hRaDVjNkkyNVJBQm5QYU9SS01QdElFdUd1WV9EV3pVV2tCQXlvOGVSMmJCejZvTDNiN2xqM3Q1V28wN3NPanJqWWhHZ0F0dVJsNkpFTXY1UVhXR1JacG5lbll3RW5TZVViUW1wejl1MkRNZ2FTOE5CTU9UY2ctWkZrWXdyQVZTWHl1WEh0N0w5RTIwWTR0eUl4cE9hSWs5RjRReFFBY295WlpzNEJwODhXUEhPTFhucVVOS2NEazlEQXZ4MGVWOD0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmdQanZlajRZdDlQR0JDQVB2OVNFLW9DR2NrT1o3SWNKTzk5RmlDd0VyVmNVbi1namZiUG9HaGJGVkNpcEhZOW9qR1dHSmJjR05DaDdQQUNUdVo5TVdwdXpHQW9PdTFPVDBJbU9CMkdFYVdVMWRDRkd2UmlHMllqQW9hWUs1djdTMTVUZ1pocmR6RlVMRXpyNS1ocDFsT2RiRnBLb21KVEJhQ2Rra0Q4b3JFeUNrYWU4d28wQzNDOXhUd3VndkJ5LU1WZ2dlX0wyWnVod1g1aldEMHVSTk11SmJGeWNDVVJNS3hJaXZkeFc2LVA2c0liUGxZeFVGcDFSM3BoUTZHaElBdFRsczROZFAxb1VEbk5SQTgtcGVENXI0TTcxWUo2LUlxcHB2QUN0MElUUTBJWWd4Nm1XUnZsRWVTN1pLRGxKSTFhMkpwUnBhWXdkSlZHOVR3el9DZVRfNWR0Y2ZwS2NkTEw5TTBDaUNXYTFQSUhiaUpiblBtOFNweG1talo3RElSQVd2cXZBMG1wMEdMakJwLTJQb3BibjJsN0Q3WDFJWUEwQXhKYjExaHo3dXE1SG9YdWFaMWF3ZFdKQkhMSHRDM29QMFdBX0taTjVJczdLcTI5RnRXQm5pQUVnZlR1UGVxZzNBbm04STZJQXIxX2hpMGg1WHl4VXE2SUNhRTFZUjFLTU5RMFNtWXlCRXVJMW9LMVBBOUZSTVFPOGFzMHJNZTF4WEtuWFpEeENtNDhzS3loVDJvWUxNTDNnbTBHdnIzcFh3cDB3SEhQTU9SaDI2aHJISWxxTjd0UGh6b0VkOTdsMF96cEZUMUhvX29FbE9aa1ZTNVlQek5vcUFhdFFnbXVUenUzMjZPMjJjeUthNUhYb3BPa2ozVEp5dG95V2RPU3BqNXdaTzNJU2F0NUZUUXNfZHVyejY4MExKb1JVUnZNd0FBSmJzLVBkUlM3end0V2gyTV9SOFpETG5KeXZqZ0dWYkR3WjB2WW0xaDJCU3p6ckRrVFpTeFRlVE40X1BFQ18xRW1LV3oyXzR3Q1daa0JUUlRiVzJxcWU0VEZaQkhlS01MU09tT0M5dEVVU0ZFcmYzUTN3bFFIU09LNTdteFlqQjByNGlhcGs4WFJoTXpUVWctcTZQVUhYMno4S3k2TTZtOHoyR2VHVVFQd1dUVnFCdjdqNnQzaTQ4ZnNselJPMXA3V0x1YVYtNXRyaTh6b1FxVmhnbHJsVjdLUXh0MUM2cHVsQ0x3RV95ZWlTVTFLcy15VFpldWliVDFrcUR5dnVXblZreW5YcFBMcGlGSWkweXZfemhSWW9ENzRRRkxSU2tEci1OZ1oxU1BJZ1hldWxBZHAyRk1YZlFha21GWTBlOWxwaDN3WXBNZmRUZS13bDNiVldtc1o3M3A1bTdxNHpHbk1VNVdYZDdlb21xTUdfS09GT1dIUnNSRWlVVm1lNFBNSU9QcEoxNnVYVDVScnBONTdOTF84dG1MdmRaczhybkRqMFZJenR0dkVvR3I1aHgtSlJBbXhxUXdSbDFkOURJclByT2dXM0dxRlNXaXpfR2laZ3JYTWFQUExia0N6SVUtTzNmVi11NXZlMm5VaVQ3a2VfWk16cU9iTTF6dHFSVm81MktmMmtCMFkxMzM5RFN1S3B5T1FKenZuelhLUTZ3THRZSTNDd3pUOUhpUWNhcktlNi1mdEt1czBjQUlTRWZfR1p4Ym1JLWpVbDhDZlR4Tmkxa2JnU2ZHdDJqWHB3SWxvRVdXcEhwaUFOYzl3bjJRaEdxdlhtNFM1RGVLZl9oM2o2c3NYZldwUW1XMUJFOUYxU2ZVRjY1RF9wLWtzcVJiUUlNTTJyeW1MYk1YWkd2OURsX1p6QVNkT3g0QTB3Rkhhd09peFUyODlid3hkT0dZbDB2N3kybGhydU9hRXVHQnJjTXJmRngwSWpnLU96LVJxMHNPdlpVenNSQThJMldQVDBYdE1henVjRkphYnpVdzlBYnl0TFA5LXFZY2lJeXNaVDRHRnctSk1sTkN6cVdfbWFtUUJZRHphQjMtLUtvUFJfOXk5MEJQRmlxN1J3RFJDWFFvc2xHd2t3MGNEdTZuaGZsQW82SWhEY3RTa2JiVk0xNmdPdGFMRzRpOE1EZ20zek1SWm8xZGZLOUZTRmNrREhYS0RfQWNlT3pHd0QxV0NSS2QxZXR5NUhDNTZKQk9oWHFUZC1CLTVWdi01d09HRS1Mcm5lanZZQk80Z1RXYzYzMDRrVkJRbFhITGJEbzROZXpqR3otMkEyanYzOXNjeVVBS20tcHNiVHpRLUJPV3VDZlpVLWlWdGhERGlzMUFZYzA5ei1rLUJXUFB6RU1xMkFGZ0puZWdnNkRqaTNCTGhwdHVxTVR6Uk5xZENVOWw1YzgzTU81V2g2TlZTMkQyekJJNUVDNGxvbXdZbVNlSkNMRFhKWWlmNGV5Rl9LcWdXd2lqQmFZSm81UnJydHkzWDg0M2p6R09CbzhIdS1Ob2VNSHRFSjZ4YmQ0c2tJMnJuYXJzbXAwbnJ4MDlkU1NrcVJ1TG1DUFJEVEJDTlJxZzFmbXpTT0twRXJyaThUYXVSaE9VeWZsQ2hFY0R4cUNFRm1Ic19qZWVnREg2aVlBQ3BPU3pNN21Bb1JpN0R0Y2I5UkpkLU51TnJYV1E5dWVEYmlwMWNJNGdqN2g4N1U1UVdsUVlaVlp0X2Y2NENuTlN0OVhUUUdvcjhvRG02Qjl3WnBuMU5fRm9wc3ZiT25mNThGQkduTndMU3VjSkZoYTlBeXBRUTZFdi1DSnp2eDhGRXdsMHRqQmdQUkhiSDNGTjhTNmZ6RE9HNklQSTVnOXlONU9UZTZCU2NWZVBrd1NrMHpaRHZ3WlloWGRrQmtEZWs3ajNRS29wcWxnemVhNzdsbjQzNXd1ZUQxZ2ppaUtGU0cySXZYQUxxa3ZzWGt6MXJWdWY3ZGJ1YVg4V1BQNXBaeXhISlY2WUJiRHo2R2ZreHIzUFV6UnZ1eVJ4VDF5WlQwejBDX2RYYktISE12M0toWlM0dVJYSUNHdko0RWM1MjZnR09yN2N1aHZoNVBk)
      flutter: beta
      xcode: latest
      cocoapods: default
    scripts:
      - cd . && flutter packages pub get
      - |
        #!/usr/bin/env sh
        set -e # exit on first failed command

        echo $IOS_FIREBASE_SECRET | base64 --decode > $FCI_BUILD_DIR/ios/Runner/GoogleService-Info.plist
      - find . -name "Podfile" -execdir pod install \;
      - keychain initialize
      - app-store-connect fetch-signing-files "com.mark.flutterapptest" --type IOS_APP_DEVELOPMENT
        --create
      - keychain add-certificates
      - cd . && flutter build ios --release --build-name=1.0.0 --build-number=$BUILD_NUMBER
        --no-codesign
      - xcode-project use-profiles
      - cd . && xcode-project build-ipa --workspace "ios/Runner.xcworkspace" --scheme
        "Runner"
    artifacts:
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - mark@nevercode.io
      scripts:
        - |
          #!/usr/bin/env bash
          set -e   # exit on first failed command
          set -x   # print all executed commands to the log
          if [ "$FCI_BUILD_STEP_STATUS" == "success" ]
          then
            # iOS Firebase App Distribution CLI
            firebase appdistribution:distribute $FCI_BUILD_OUTPUT_DIR/flutterapptest.ipa --app 1:65771059764:ios:b6f523b0d5c2829dd4e861 --groups "test" --token "$FIREBASE_TOKEN"
          fi
  android:
    name: Android
    max_build_duration: 60
    environment:
      vars:
        FIREBASE_TOKEN: 1//0cQj_4GQcN1O9CgYIARAAGAwSNwF-L9IrWhBxfO-TrSWG3dwdONpBy2Lx01PlrmXN2KPDBI06fbf0Hm7RKsN9yuImUlcKPwkQiOA
        ANDROID_FIREBASE_SECRET: 'ewogICJwcm9qZWN0X2luZm8iOiB7CiAgICAicHJvamVjdF9udW1iZXIiOiAiNjU3NzEwNTk3NjQiLAogICAgInByb2plY3RfaWQiOiAiZmx1dHRlcnRlc3QtYmYwMjAiLAogICAgInN0b3JhZ2VfYnVja2V0IjogImZsdXR0ZXJ0ZXN0LWJmMDIwLmFwcHNwb3QuY29tIgogIH0sCiAgImNsaWVudCI6IFsKICAgIHsKICAgICAgImNsaWVudF9pbmZvIjogewogICAgICAgICJtb2JpbGVzZGtfYXBwX2lkIjogIjE6NjU3NzEwNTk3NjQ6YW5kcm9pZDpiZDEyZTYxODRlMTcxMzUyZDRlODYxIiwKICAgICAgICAiYW5kcm9pZF9jbGllbnRfaW5mbyI6IHsKICAgICAgICAgICJwYWNrYWdlX25hbWUiOiAiY29tLm1hcmsuZmx1dHRlcmFwcHRlc3QiCiAgICAgICAgfQogICAgICB9LAogICAgICAib2F1dGhfY2xpZW50IjogWwogICAgICAgIHsKICAgICAgICAgICJjbGllbnRfaWQiOiAiNjU3NzEwNTk3NjQtM3FlZmFsOWNzc3Jnbm0wYmJyMDVxcHYxcjdxa2V2Zm4uYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLAogICAgICAgICAgImNsaWVudF90eXBlIjogMwogICAgICAgIH0KICAgICAgXSwKICAgICAgImFwaV9rZXkiOiBbCiAgICAgICAgewogICAgICAgICAgImN1cnJlbnRfa2V5IjogIkFJemFTeURqVFRaeEpzU3FiNkFxcXM4d3M1Q004LXNTSE1EakRzWSIKICAgICAgICB9CiAgICAgIF0sCiAgICAgICJzZXJ2aWNlcyI6IHsKICAgICAgICAiYXBwaW52aXRlX3NlcnZpY2UiOiB7CiAgICAgICAgICAib3RoZXJfcGxhdGZvcm1fb2F1dGhfY2xpZW50IjogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgImNsaWVudF9pZCI6ICI2NTc3MTA1OTc2NC0zcWVmYWw5Y3NzcmdubTBiYnIwNXFwdjFyN3FrZXZmbi5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSIsCiAgICAgICAgICAgICAgImNsaWVudF90eXBlIjogMwogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgImNsaWVudF9pZCI6ICI2NTc3MTA1OTc2NC1haG1wbG85Mms4NXU3YW52MnI5Zm5vZnFhcGE4Ym1hci5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSIsCiAgICAgICAgICAgICAgImNsaWVudF90eXBlIjogMiwKICAgICAgICAgICAgICAiaW9zX2luZm8iOiB7CiAgICAgICAgICAgICAgICAiYnVuZGxlX2lkIjogImNvbS5tYXJrLmZsdXR0ZXJhcHB0ZXN0IgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgXQogICAgICAgIH0KICAgICAgfQogICAgfQogIF0sCiAgImNvbmZpZ3VyYXRpb25fdmVyc2lvbiI6ICIxIgp9

          '
        FCI_KEYSTORE_PATH: /tmp/keystore.keystore
        FCI_KEYSTORE: Encrypted(Z0FBQUFBQmdQanZlRlphYzVVVlJNbDRYdmF2ZG5OOVJ2bW1uTW1oMXU0aEE1ZkJxbmtzOEw4UDdXTS1DYkc0ZVI3TGZHd1ZWZWtuTmdCUnJ5YURsYmdOaEU2VE5Obi0wN1ZkWkViQlFyUnRtUjB2aGRWcURrRE8tdlFhVENScFlVZlZIUGRoS202aEl2NU5zOFY1SHNjcWFaV2FuZFE2bzhOSldrQlIwU1hSUWNRVTJUMmdiTGYxWnMzYk4xQ2l3Vng1eWRHWmdfZktMdjlkbVVydGozMDdpa1MwclZjUV8tWGhoX25LOWo0VjVpRV9MYXB6Ujh3NWdWbURkQjhnOG5jRmtWaGpIVkVBV3dIZmxTUjVWNDBMa2t0aTB0cjBVMFZPaWw2S3lUbldzSWJBSW9nUGFjT0NOUGFVN3RHYnd3VDVodE1tV3NhMGhUQU9uSkxUVThhV2djMTU1MmI3R2puNWtVQUhiZkVPd3NNQzVSNDJPTlgtWGNFdzVtRllwS2ExTTlPckUtR2RURFdJcENlUnVwWUQ4eDhJMVlVSHU2QkRKTjVDcjREWHY1YWdKTXU1WmZkNUlYTVVEQ2hpcDMybFFKVXpsTlNKUkp6TS1ENklVQXdJSVBLd1REcWhNclh1UmM4ZnBidmh1QnpBUU9QRUZOeUdJaFpjakFlMzFONFZzUGh3ZWJuMzZQcjFRZE12R0NYVzdsemQzU0s1QWRCNUctT0Y0SmFLeWhIRFdIclpwdExQd3lXb3pBSEFwWlRDT0pQSUl1eldGTmliMUp5UGZZU3J5VnZtZG1wVlNuYVNZSXhqdlZIdWFUWFFYTG5YbzgyazlMVFFsRVd5Q0w0M1V2N2pKYmNyZ0E1MUJqSjF3c0JTR2lONklYS2txdUgzaEZocmQyRHdIU3E5emR2UVJkekd3ZUJQRjZHWGNfWFRiTkJsaGZoQkJJSHFrZ3lqYk5yX0lXV282VFpfbDc0WHlxUWlwR05KTmJYWXpqQ3dETEY4X0JnblYxSVZlT1hfem42d2liVTdlNGtzT2dOTzF0MTVOdXlKZ0xmUmxrTFlPSzJNZHBFYUxKN0w1R3BpRWJTZUZ6OExHWFNWTzRNR2N1NVE4Y2FTZ3BjRUJlVUtLeWU1X3dGeFdUaWE5UVVOSWVoclJmUzBSNnlqd1U5MlBmNHFHS3RoTFBOTGNDWDBKUkNnV0hEeUJBTXRnSFcxTGF4Y3VsRmtCNGxCQTdUM3hQVDRCOVJCZHRET0Z6NElWdVhuYzI5LTdJTzc0WkRPQjBYcHhiNnRSR2N1N0F0V1RRQXZGLTVKcnMzY01XQWdOLUl1RTNTdWVSdzE5X2dXd2t3b0FvazlfTkRSMHgyWkFpcWlYU3hIakgtcVN0WnJMNV9YVko2VUh4MUlzaFNPOC1FT2E2MTljSnd4N2E4Z081cHZwSkY0WS13NncxbDB3TnhFZ3ljTWVZSUVnaDluakk0TzU0OUJ6Z0xMckFtTWo1ZTVwQkQyYWtJYWJpU01STGNxam1Xck5RVFpweUw1VFdTaG9zSjJZWWh5WTNsa05XQ1pjRDFQMnNmTzRtUU9PSUdDcVZWM29JRnBpc0F2MFhMRG9BTmZUQ1dYblFTbTlZMzh5MW1DUHBnVko5SmtIcW1yTjFCNHkwZjVhRzdydWxaS01RbFhXTEFRUG9JMEx2SXVxeGNxRVRhM0RWSXNTemZOZzlKcmN1RmdhNHBUSFNSb1VlRXFOVzh2cnFGR0NsNjhhZ193RUVpaWVIYjZQVWJKLUtnYnctUFFDc2F2amItN1N6eHhKWl9scnFLOEZ1VzVha2RoeTZBTjdPaVl6cm1ZMTlSbm52WUNmMnQ2ZWhSbW9LQm9FeUNXNUx0VHRsVTFnYnJYdUZDTklpSE5BZE9iWE5NeWJ0RnVhWDVuMmQ0MGRKUU5zTkhBZTNablRBbnpMOFluRm1nLVJmR0hKNy1FWXVabDkwb2w1WFpKSWRueXdjdXpzeGF2eWIzTm9rYmJIelhHeUw5Ylc1dnJrbFVNM1pXcnl3ekVFVmtTclZuMWxIYUtCa29MSnIxWDh2LXJGUkhtd3cyQ2lmNDJjZzgtRFhvaE5JOG9ieWNtUHpidVZISE1OdUhYdGtlX2tXb1YwR2p6YVd6Sl83aVVDZTk3VlRNSmxjZDJKWTdiTnpNRUk3NnNBZlhVYTAxQW5ZNkVpejMwaDVWMkFLQjVpNXFWNEs2REc5ZDFyUEs5T04zM3U5N3FXYnlnaEZWZVNDWExOZUs5Zzh0NzVKOEVrY1VBc0lDQUZwWXc2VGVQSlRSTHQ1TUVTZlhtc1doYm1YVW4wQ1p2N0ZvM0FfOHRjeDlqYXo1N2lNbWs3eE8tODZ3NUZnbjB5N00wUko1Q1pOR1h0SGhSSF9wLUdRZGJuMFVTUEhSblp5RlVJQTBKODAwMVVTYTB5VmdPYWExU2QwM2l5cmc0OGx2ZmVQZEVBaUZISzl1RmpxSlZUVURsT0ZyVFY3QnVmTnV3cW92bkN2OUpNZVFTSm1ueU9DXzFmZlJXMzNIZUdCVnA1TnNQUmZnZ1ZiQzFEYWFOYlQ3T0NFZ2dZZXFxX2hFSjhvWEYzNmNyNmZTWV9ManV0T0diUWpUVWhwQ2hETnpvRDg1RUJ2WWp4NEdrT1N6Q2d3ZERHNDFsa0o0RmljWDBZNGc5ckpSVVJFb05qbmxEb0JrZi1kMWtYQkE5QXZ3LUhaY3BBRk5EczkzWUs3Z3gzcUExT0I4clFyb3ExZW9EUmQ3Q3pvTEttV0oxVHlPcjZLRmp1aVM4azVrdXdsZEtuU2d6OE5MVkNQaFhqZXVvQTZKaUVpNzdCWWgzWEZKMFdhUGtrWHNPT01Nem16YWp1R1RxYTJpSmNLR3FjRXN2aVBvZ1U3bFg5dnNXaW9DeDlCUU9iMFRvWG9zY09uNy1HM1lZQVhWbWtQMFZybWw1WjJ5a3c1RzVEZHE4cHJhUXY0STZGZlRGZFR5b1A2eVlHdnJyY3cwbkRqeFBGb1dhNVdpQjFYbXRwdXZJT0ZCTEh1Q3YzZlRvWFotVnhOa2JfcDdwZnlrcnh6YWNKVmRPVHM2VW9KZ3NKSzF4cjBpRi1BU004UXJVSmxuSGExT0dpWkFKM3kxc1owOS1HZ3lyN3EtT3pfWExqNUJOSlVxbEJmZ2RJYnVMakNwclVBU2dQZURaNWtSdVBaamhyR19yMENtbEl1bXByRWlmemM5cGVDdE93dGlKaFZPVmg4Nm5DRU8yd1A1dHRhN3JZV2s1V0tZbXB6bGp4U3FEWGVzNU44T19CRFpnS3VOZ0dwRzlFVXppTUN0eEdGMEs4SHFTS1F6bS14c1VyWFhWNWN6MHBDLW0tRGlHQUFTdXRObUEtSVJDNGNMNVBzN3ZpNERveHoyOWNnMGlCLWtJOUpFVXhFNmF2N2VaWjhCMF9kT3g5VXNlMlZER2RJWmhPazFWVjBDbjVQUmxVZ1YtRmQ0ejM0Z0RpNUdwQUtBbm9qaTB1bFVIaGNJMUxKUDRFRzZhMDRZU3BZZktNZ0JTWU5fejhNSmI2YmJMSFlVQWYwV3diTGZyMC1FejBrQ3hDWThjVG1kT2xPOFN5Ml9UdVJQdDFGdU9VZGZaRE9JVW5SekZ0WlhDa3RzSzVIUms3aks4WmhXa1ZsUExmUko2VFltNkw2dXljdmtzNXpKWmYzTlBNTkVtMTlJV0FyM2xQQ05zdmNsSHZzeUpqa3cyeGpieFdkaXlwcGtmMW8tWUV1OXZpQlM1OXVSWkZ2WXZJbGNsQnZyeTBDTWE2Zjc5al9vVndhYzBYbGtPbk9vMlRFZUFBdHdjREpHRTRReG5hR0VIM1hEM21yWVEyUG1lXzU1bmZrd3FLQUtKN0dhMDl2YVhmOUQtQVRoc21EZDNCMDI2MjZoSW53SXAycURHUFJBS2pJM3ZuZG1xdlJJSmpub0RJNUJVN24yY0tJY1I3X1ZERFhURWE4OTVhRWg4TkpvMW5QWXBveGNmQXlYUjFXQ2ZoLXdDM2MxS29FUHNnbGxpb0ZlYjZFdFJ3cUdIX2w0R2lSbDFEZTV4MFFSZUoxQ3h2ck5XMElPcENPLVZoekVlNmJyZzZEd05KV3hRNE9GaDdCa1dSaUY2VkdMelpZSmNMWWxMVE9mTkRFX0R0RDBkVzlhaVBRSndrZDBMbGJCMWlRWmxuU2tjeWUzUGIzNlEtNE5vRXd5Sk1FdW51Nk1zM3h0MmtMOHZ2aG5Ldi1zZE5zd2kzTG44QlFnNVRsTWZNNGZyYW5fWEI2Zk9JTGV0dUdsVXJOdDMzcVJyQTkyaEhyS0ZmQTl6Tm5SZDc0MWdfYTEtaU8tdWpiem9LRWZSc0tYdlFTamNkT2xjQ0J5amxMWG9CeHcwMWU4OGVzZVVYbmxoS3JiNjEzdE5LYUxEaXBLTEtLeUdFei1rYWR1NS1Pc1lnT1RkYnFBWFRiQmR2MmtReTd4dm1pVG5lNHRXbHVtM3lGcmQya01pME9qTHZLdkxaYy1TYmx3aXRyazdIeEJUa2pfcEtCU3lwbHAzTmZRZkplX2lab1QxMlR4OWpYS0xKLURWOGpEWm92VndTMkFyVnZMRDFOeGFnUnBoT2JqakQ5QXlqT01JckdHcE1mMGFwZGFOSmgyVmZFQ3U3OWdKMEJ5Nzh3Sy11c1ZEaFE0d2FZaVd3dVJYU2kzRWVnYldyT0hmOElPdW4tNXJpNXR5ZnVSTUhERU53VDZTc2gxaGMzTVFOaml0cjVjLWU3Nnk0QjhCbVpkZWdiVTZDdHpDcXdzWl9CR05rbHdpZmNJTjBHQllpVkUtQXNKYUwxX2EyQVNoQWlxcUlSZF94QWlKYUVWWDFfX05oQzZnX0ZSSXNPMDJZS0tZR29PemdkUjR2OGIyYkJucU5ualUxUVhGdVZ6eWVkbHNqMUFJeUxPeDJDcXhjNlZmaXJOM0M0RzMteUpiRksxeGxMWWIzc1JhSTJGcUtpRzdMT1hsVlhsaDdxak9VUVVYNm5qNkd6SjRnU29OZzgwMVJKSkg4aW1FMjcybFJwSzJ1bkVZdWlqS1E1MVlreXVHNUlnZzRhZ3J0Y2JoX3Z0QjNTekFrRkdiQjZjTmluZTM0ZG1QVjdTR1pYeWZmUmZ0cWFaZlVJR3hvaTJLdGcwVFN0UHBORVI5Y3ZKV0Zjdk9hdXdTQVQ4c3BiMUF4SWpQcUQ5QUlIcW1YVWtSQUtzVUdNSk01RmxZNTJ3UEtOVFZES1hKUG54Ul9ESWJkN1JuZHFQYTFwaHBTWTA1SUg4cDlCZFhpSkNORlZfemlFM1FlenVQcHlKNnRWYXRtMU9jcDFoMWhiN2xpbERqc0djUE9OZ2xUdko3MFUzQUI0b3JETzhrUHRVeVlYV1RreTBadmV1aGp2dEdsbnhUeWhDYXM2NWNJbUVhcy1HbGE2cko4Nm9mNEpjTnl2R1JLYmRvRWxHWVZWOWtQMUVVM0pRb3JHMno0dlk3b1MtczN3UTZQaXpYOW44cUg1bFoybjJKaHdlbnRKT3FSZVdNNEJBS3RCc3FnMHdnUjI1WjZBT21NRkt5ejRGZVFXNjJ0NXNnYVhXb3dsZEJtMnlCa01vQjRZWUhYWDdIZk5xUkJpMzVFTHdNYjFRTFp0eHNrc1RjTUFoaWR1d2o1NmJQVVRsQ001N1c4Z21CNjFJbkRSMXYwckxYMkJ5OGRST3o0TFFvT2JDZkk4c2Z6Njd6N3ZYeFlaVFRqMzhsUjlrbTZvWm9kQ2JKMUhOdmJkc2d5eGxqQ3dLM1JDTm45eGNBeEp4WkVabmFXQkwydkZlaTVOUndVRDBXb1FLNXE0QVdFamRCZWYzR3NfUWZWdlVhTnJZalYxR1lNMlZRSlpqekh3aHVDbkN3NklxTERFMFVpbXpNQjU3VWQ1alpBYkpqcnlYMEs1VGhoa2lfTjJEM3JNTFFUWkZONElhSnZ1aW9aZ0VYUVpOUkswbWo0S1pQdV9QVk1TWVNURlFmM1l6aHJ3VFc4LXdGbVpnZ3ZfZVdtWERqZWRndWptcjN5aTB0U0lkYlpNZmh3Z09oOC12djRRX3MxXzhNUVBsX0ZxQlllY21xbzhUWGJhWE5qSTlpMTd2Mm5sU2pJV2hBdC1lRVV3UWlfU19SVVlrVzNGaTR3MDViZGI2Sl96QXZMcERSNm9ZMXJpb054Ry1LUEEtU0tfSFktNDZhOW5RSk9MQWVFUGVZZlpCRmdTa1lhUjJqTTc1ckdoWXc5R3hDbElNWlpHV2JEUzZFX3ZENDcxbWs9)
        FCI_KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmdQanZlTU56NjNOd0RKQ2ZjZm4tRk5Rb3RqOThGeVpObGdFQ3R1OVU2T3lzWmQ2SV9nS2NzZWhtMUVFelZDLTZPS2s0Z3ZmaEE0cklGX3ZacjJIT2NhVFpZQ0E9PQ==)
        FCI_KEY_PASSWORD: Encrypted(Z0FBQUFBQmdQanZlSlp3SjJlLXZVNGg1Mi1rVmltY0ZnQklZbzVmeFpGVnAwM1FKTm1ZVTFBTDdFNk92ek9NQXd0LUxZSGM3eGZzNzBtVWpTS3I4bi1qZEhPRl9SM1plRkE9PQ==)
        FCI_KEY_ALIAS: Encrypted(Z0FBQUFBQmdQanZlM0tKZDYyU3k3czJkRkljbEtLdnlESXlqMHQ5QXhQY3JDelZaa2dmZXVQekZ4ZWxxZ29DeGxSbEZzLWdRNjZhc2RuQXV5U2YxVHJWMlhydVFHQTl6aHc9PQ==)
      flutter: stable
      xcode: latest
      cocoapods: default
    scripts:
      - |
        # set up key.properties
        echo $FCI_KEYSTORE | base64 --decode > $FCI_KEYSTORE_PATH
        cat >> "$FCI_BUILD_DIR/android/key.properties" <<EOF
        storePassword=$FCI_KEYSTORE_PASSWORD
        keyPassword=$FCI_KEY_PASSWORD
        keyAlias=$FCI_KEY_ALIAS
        storeFile=/tmp/keystore.keystore
        EOF
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - cd . && flutter packages pub get
      - cd . && flutter test
      - |
        #!/usr/bin/env sh
        set -e # exit on first failed command

        echo $ANDROID_FIREBASE_SECRET | base64 --decode > $FCI_BUILD_DIR/android/app/google-services.json
      - cd . && flutter build apk --release --build-name=1.0.0 --build-number=$BUILD_NUMBER
    artifacts:
      - build/**/outputs/**/*.apk
      - build/**/outputs/**/*.aab
      - build/**/outputs/**/mapping.txt
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - mark@nevercode.io
      scripts:
        - "#!/usr/bin/env sh\n \nset -e   # exit on first failed command\nset -x \
          \  # print all executed commands to the log\n \nif [ \"$FCI_BUILD_STEP_STATUS\"\
          \ == \"success\" ]\nthen\n\n  # Android Firebase App Distribution CLI\n\
          \  firebase appdistribution:distribute $FCI_BUILD_OUTPUT_DIR/app-release.apk\
          \ --app 1:65771059764:android:bd12e6184e171352d4e861 --groups \"test\" --token\
          \ \"$FIREBASE_TOKEN\"\n\nfi\n"
  web:
    name: WEB
    max_build_duration: 60
    environment:
      flutter: beta
      xcode: latest
      cocoapods: default
    scripts:
      - cd . && flutter packages pub get
      - cd . && flutter config --enable-web
      - |
        #!/usr/bin/env sh
        set -e # exit on first failed command

        echo $IOS_FIREBASE_SECRET | base64 --decode > $FCI_BUILD_DIR/ios/Runner/GoogleService-Info.plist
      - |
        # build web
        cd .
        flutter build web --release
        cd build/web
        7z a -r ../web.zip ./*
    artifacts:
      - build/web.zip
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - mark@nevercode.io
